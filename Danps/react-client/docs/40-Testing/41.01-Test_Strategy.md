# 41.01 Test Strategy

This document outlines the testing strategy for the React Client application.

## 1. Overview
We use a combination of tools to ensure code quality and reliability:

-   **Test Runner**: [Vitest](https://vitest.dev/) (fast, Vite-native).
-   **Testing Library**: [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/) for component integration tests.
-   **Environment**: `jsdom` to simulate browser APIs.

## 2. Directory Structure
Tests are co-located with the components they test, inside a `__tests__` directory.

```text
src/
  features/
    auth/
      components/
        __tests__/
          Login.test.tsx
          Register.test.tsx
        Login.tsx
        Register.tsx
```

## 3. Running Tests
Run the following commands in the terminal:

-   **Run all tests**: `npm test`
-   **Run in watch mode**: `npm test -- --watch`
-   **Run with coverage**: `npm test -- --coverage`

## 4. Writing Tests
### 4.1 Component Tests
Focus on testing user interactions rather than implementation details.

**Example Pattern:**
```tsx
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import MyComponent from '../MyComponent';

describe('MyComponent', () => {
  it('should submit form', async () => {
    render(<MyComponent />);
    
    fireEvent.change(screen.getByPlaceholderText('Name'), { target: { value: 'John' } });
    fireEvent.click(screen.getByText('Submit'));
    
    await waitFor(() => {
      expect(screen.getByText('Success')).toBeInTheDocument();
    });
  });
});
```

### 4.2 Mocks
External dependencies (APIs, third-party libs) should be mocked using `vi.mock()`.

**Example:**
```tsx
import * as api from '../../api/service';
vi.mock('../../api/service');

// Usage inside test
(api.doSomething as any).mockResolvedValue({ data: 'ok' });
```
